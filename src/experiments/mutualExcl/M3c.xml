<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>clock S1_z;
clock S2_z;
clock Ctrl_z;
clock Ctrl_y0;
int[0,2] S1_IntStat := 0;
int[0,2] S2_IntStat := 0;
int[0,4] Ctrl_IntStat := 0;
int[0,1] Ctrl_grant1 := 0;
int[0,1] polled_S1_grant := 0;
int[0,1] Root_req2 := 0;
int[0,1] polled_S2_request := 0;
int[0,1] Ctrl_grant2 := 0;
int[0,1] polled_S2_grant := 0;
int[0,1] S1_Safe := 0;
int[0,1] polled_Ctrl_Safe1 := 0;
int[0,1] S2_Safe := 0;
int[0,1] polled_Ctrl_Safe2 := 0;</declaration><template><name>S1</name><location id="id0" x="-96" y="80"><name x="-106" y="50">start_S1</name><label kind="invariant" x="-106" y="95">S1_z &lt;= 0</label></location><location id="id1" x="190" y="80"><name x="40" y="56">I_am_safe</name><label kind="invariant" x="40" y="88">S1_z &lt;= 1000</label></location><location id="id2" x="190" y="230"><name x="64" y="216">I_am_unsafe</name><label kind="invariant" x="64" y="240">S1_z &lt;= 1000</label></location><init ref="id0"/><transition><source ref="id0"/><target ref="id1"/><label kind="assignment" x="-80" y="24">S1_Safe := 1, S1_IntStat := 0</label></transition><transition><source ref="id1"/><target ref="id1"/><label kind="guard" x="472" y="-120">S1_IntStat == 0 &amp;&amp; S1_z &gt;= 0</label><label kind="assignment" x="464" y="-104">polled_S1_grant := Ctrl_grant1, S1_IntStat := 1</label><nail x="392" y="-128"/><nail x="440" y="-104"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="guard" x="296" y="-192">S1_IntStat == 2</label><label kind="assignment" x="312" y="-176">S1_IntStat := 0, S1_z := 0</label><nail x="296" y="-160"/><nail x="240" y="-176"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="guard" x="-448" y="-112">S1_IntStat == 1 &amp;&amp; polled_S1_grant == 0 &amp;&amp; S1_Safe == 1</label><label kind="assignment" x="-440" y="-96">S1_IntStat := 0, S1_z := 0</label><nail x="-48" y="-120"/><nail x="8" y="-144"/></transition><transition><source ref="id1"/><target ref="id1"/><label kind="guard" x="-264" y="-208">S1_IntStat == 1 &amp;&amp; polled_S1_grant == 1 &amp;&amp; S1_Safe == 1</label><label kind="assignment" x="-48" y="-192">S1_IntStat := 0, S1_z := 0</label><nail x="112" y="-168"/><nail x="168" y="-176"/></transition><transition><source ref="id1"/><target ref="id2"/><label kind="guard" x="-232" y="152">S1_IntStat == 1 &amp;&amp; polled_S1_grant == 1 &amp;&amp; S1_Safe == 1</label><label kind="assignment" x="-96" y="176">S1_Safe := 0, S1_IntStat := 0, S1_z := 0</label></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="128" y="520">S1_IntStat == 0 &amp;&amp; S1_z &gt;= 0</label><label kind="assignment" x="120" y="496">polled_S1_grant := Ctrl_grant1, S1_IntStat := 1</label><nail x="144" y="472"/><nail x="256" y="480"/></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="512" y="360">S1_IntStat == 2</label><label kind="assignment" x="512" y="336">S1_IntStat := 0, S1_z := 0</label><nail x="472" y="312"/><nail x="464" y="400"/></transition><transition><source ref="id2"/><target ref="id1"/><label kind="guard" x="328" y="136">S1_IntStat == 1 &amp;&amp; S1_Safe == 0</label><label kind="assignment" x="328" y="160">S1_Safe := 1, S1_IntStat := 0, S1_z := 0</label><nail x="312" y="232"/><nail x="312" y="80"/></transition><transition><source ref="id2"/><target ref="id2"/><label kind="guard" x="432" y="448">S1_IntStat == 1 &amp;&amp; S1_Safe == 0</label><label kind="assignment" x="440" y="432">S1_IntStat := 0, S1_z := 0</label><nail x="424" y="408"/><nail x="432" y="440"/><nail x="416" y="464"/></transition></template><template><name>S2</name><location id="id3" x="-168" y="80"><name x="-178" y="50">start_S2</name><label kind="invariant" x="-176" y="32">S2_z &lt;= 0</label></location><location id="id4" x="190" y="80"><name x="64" y="56">I_am_safe</name><label kind="invariant" x="24" y="40">S2_z &lt;= 1000</label></location><location id="id5" x="190" y="230"><name x="80" y="248">I_am_unsafe</name><label kind="invariant" x="64" y="272">S2_z &lt;= 1000</label></location><init ref="id3"/><transition><source ref="id3"/><target ref="id4"/><label kind="assignment" x="-112" y="80">S2_Safe := 1, S2_IntStat := 0</label></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="488" y="-88">S2_IntStat == 0 &amp;&amp; S2_z &gt;= 0</label><label kind="assignment" x="496" y="-64">polled_S2_request := Root_req2, polled_S2_grant := Ctrl_grant2, S2_IntStat := 1</label><nail x="432" y="-96"/><nail x="472" y="-64"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="616" y="56">S2_IntStat == 2</label><label kind="assignment" x="616" y="72">S2_IntStat := 0, S2_z := 0</label><nail x="608" y="48"/><nail x="608" y="112"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="-688" y="-80">S2_IntStat == 1 &amp;&amp; polled_S2_request == 0 &amp;&amp; polled_S2_grant == 0 &amp;&amp; S2_Safe == 1</label><label kind="assignment" x="-296" y="-64">S2_IntStat := 0, S2_z := 0</label><nail x="-64" y="-112"/><nail x="-96" y="-80"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="-536" y="-176">S2_IntStat == 1 &amp;&amp; polled_S2_request == 1 &amp;&amp; polled_S2_grant == 0 &amp;&amp; S2_Safe == 1</label><label kind="assignment" x="-368" y="-160">S2_IntStat := 0, S2_z := 0</label><nail x="48" y="-144"/><nail x="112" y="-168"/></transition><transition><source ref="id4"/><target ref="id4"/><label kind="guard" x="264" y="-168">S2_IntStat == 1 &amp;&amp; polled_S2_request == 0 &amp;&amp; polled_S2_grant == 1 &amp;&amp; S2_Safe == 1</label><label kind="assignment" x="272" y="-152">S2_IntStat := 0, S2_z := 0</label><nail x="232" y="-152"/><nail x="280" y="-128"/></transition><transition><source ref="id4"/><target ref="id5"/><label kind="guard" x="-504" y="160">S2_IntStat == 1 &amp;&amp; polled_S2_request == 1 &amp;&amp; polled_S2_grant == 1 &amp;&amp; S2_Safe == 1</label><label kind="assignment" x="-176" y="176">S2_Safe := 0, S2_IntStat := 0, S2_z := 0</label><nail x="104" y="120"/><nail x="104" y="232"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="416" y="352">S2_IntStat == 0 &amp;&amp; S2_z &gt;= 0</label><label kind="assignment" x="424" y="328">polled_S2_request := Root_req2, polled_S2_grant := Ctrl_grant2, S2_IntStat := 1</label><nail x="376" y="384"/><nail x="400" y="352"/></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="312" y="440">S2_IntStat == 2</label><label kind="assignment" x="336" y="424">S2_IntStat := 0, S2_z := 0</label><nail x="336" y="424"/><nail x="256" y="440"/></transition><transition><source ref="id5"/><target ref="id4"/><label kind="guard" x="200" y="168">S2_IntStat == 1 &amp;&amp; polled_S2_request == 0 &amp;&amp; S2_Safe == 0</label><label kind="assignment" x="200" y="184">S2_Safe := 1, S2_IntStat := 0, S2_z := 0</label></transition><transition><source ref="id5"/><target ref="id5"/><label kind="guard" x="184" y="472">S2_IntStat == 1 &amp;&amp; polled_S2_request == 1 &amp;&amp; S2_Safe == 0</label><label kind="assignment" x="192" y="488">S2_IntStat := 0, S2_z := 0</label><nail x="200" y="432"/><nail x="128" y="488"/></transition></template><template><name>Ctrl</name><location id="id6" x="40" y="80"><name x="30" y="50">start_Ctrl</name><label kind="invariant" x="30" y="95">Ctrl_z &lt;= 0</label></location><location id="id7" x="190" y="80"><name x="96" y="80">wait_for_s2</name><label kind="invariant" x="180" y="95">Ctrl_z &lt;= 1000</label></location><location id="id8" x="190" y="230"><name x="168" y="184">g1</name><label kind="invariant" x="180" y="245">Ctrl_z &lt;= 1000</label></location><location id="id9" x="344" y="232"><name x="376" y="224">wait_for_s1</name><label kind="invariant" x="464" y="224">Ctrl_z &lt;= 1000</label></location><location id="id10" x="340" y="80"><name x="376" y="80">g2</name><label kind="invariant" x="330" y="95">Ctrl_z &lt;= 1000</label></location><init ref="id6"/><transition><source ref="id6"/><target ref="id7"/><label kind="assignment" x="-304" y="32">Ctrl_grant1 := 0, Ctrl_grant2 := 0, Ctrl_IntStat := 0</label></transition><transition><source ref="id7"/><target ref="id7"/><label kind="guard" x="-136" y="-144">Ctrl_IntStat == 0 &amp;&amp; Ctrl_z &gt;= 0</label><label kind="assignment" x="-424" y="-168">polled_Ctrl_Safe1 := S1_Safe, polled_Ctrl_Safe2 := S2_Safe, Ctrl_IntStat := 1</label><nail x="80" y="-120"/><nail x="128" y="-152"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="guard" x="-88" y="-88">Ctrl_IntStat == 2</label><label kind="assignment" x="-160" y="-72">Ctrl_IntStat := 0, Ctrl_z := 0</label><nail x="48" y="-104"/><nail x="40" y="-72"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="guard" x="-448" y="-32">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe2 == 0 &amp;&amp; Ctrl_grant1 == 0</label><label kind="assignment" x="-216" y="-16">Ctrl_IntStat := 0, Ctrl_z := 0</label><nail x="16" y="-56"/><nail x="8" y="0"/></transition><transition><source ref="id7"/><target ref="id7"/><label kind="guard" x="168" y="-224">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe2 == 1 &amp;&amp; Ctrl_grant1 == 0 &amp;&amp; Ctrl_y0 &lt;= 2000</label><label kind="assignment" x="168" y="-192">Ctrl_IntStat := 2</label><nail x="176" y="-160"/><nail x="240" y="-160"/></transition><transition><source ref="id7"/><target ref="id8"/><label kind="guard" x="-416" y="112">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe2 == 1 &amp;&amp; Ctrl_grant1 == 0 &amp;&amp; Ctrl_y0 &gt;= 2000</label><label kind="assignment" x="-240" y="128">Ctrl_grant1 := 1, Ctrl_IntStat := 0, Ctrl_z := 0, Ctrl_y0 := 0</label></transition><transition><source ref="id8"/><target ref="id8"/><label kind="guard" x="-192" y="240">Ctrl_IntStat == 0 &amp;&amp; Ctrl_z &gt;= 0</label><label kind="assignment" x="-512" y="224">polled_Ctrl_Safe1 := S1_Safe, polled_Ctrl_Safe2 := S2_Safe, Ctrl_IntStat := 1</label><nail x="8" y="224"/><nail x="8" y="272"/></transition><transition><source ref="id8"/><target ref="id8"/><label kind="guard" x="-120" y="184">Ctrl_IntStat == 2</label><label kind="assignment" x="-224" y="160">Ctrl_IntStat := 0, Ctrl_z := 0</label><nail x="160" y="200"/><nail x="8" y="200"/></transition><transition><source ref="id8"/><target ref="id9"/><label kind="guard" x="160" y="320">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe1 == 0 &amp;&amp; Ctrl_grant1 == 1</label><label kind="assignment" x="168" y="304">Ctrl_grant1 := 0, Ctrl_IntStat := 0, Ctrl_z := 0, Ctrl_y0 := 0</label><nail x="192" y="296"/><nail x="344" y="296"/></transition><transition><source ref="id8"/><target ref="id8"/><label kind="guard" x="-448" y="304">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe1 == 1 &amp;&amp; Ctrl_grant1 == 1 &amp;&amp; Ctrl_y0 &lt;= 2000</label><label kind="assignment" x="24" y="328">Ctrl_IntStat := 2</label><nail x="56" y="296"/><nail x="144" y="296"/></transition><transition><source ref="id8"/><target ref="id9"/><label kind="guard" x="208" y="200">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe1 == 1 &amp;&amp; Ctrl_grant1 == 1 &amp;&amp; Ctrl_y0 &gt;= 2000</label><label kind="assignment" x="208" y="184">Ctrl_grant1 := 0, Ctrl_IntStat := 0, Ctrl_z := 0, Ctrl_y0 := 0</label><nail x="320" y="232"/></transition><transition><source ref="id9"/><target ref="id9"/><label kind="guard" x="464" y="488">Ctrl_IntStat == 0 &amp;&amp; Ctrl_z &gt;= 0</label><label kind="assignment" x="456" y="512">polled_Ctrl_Safe1 := S1_Safe, polled_Ctrl_Safe2 := S2_Safe, Ctrl_IntStat := 1</label><nail x="400" y="504"/><nail x="480" y="488"/></transition><transition><source ref="id9"/><target ref="id9"/><label kind="guard" x="592" y="384">Ctrl_IntStat == 2</label><label kind="assignment" x="592" y="400">Ctrl_IntStat := 0, Ctrl_z := 0</label><nail x="576" y="432"/><nail x="584" y="392"/></transition><transition><source ref="id9"/><target ref="id9"/><label kind="guard" x="544" y="424">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe1 == 0 &amp;&amp; Ctrl_grant2 == 0</label><label kind="assignment" x="536" y="440">Ctrl_IntStat := 0, Ctrl_z := 0</label><nail x="504" y="456"/><nail x="544" y="432"/></transition><transition><source ref="id9"/><target ref="id9"/><label kind="guard" x="608" y="304">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe1 == 1 &amp;&amp; Ctrl_grant2 == 0 &amp;&amp; Ctrl_y0 &lt;= 2000</label><label kind="assignment" x="616" y="320">Ctrl_IntStat := 2</label><nail x="592" y="296"/><nail x="592" y="344"/></transition><transition><source ref="id9"/><target ref="id10"/><label kind="guard" x="352" y="144">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe1 == 1 &amp;&amp; Ctrl_grant2 == 0 &amp;&amp; Ctrl_y0 &gt;= 2000</label><label kind="assignment" x="352" y="160">Ctrl_grant2 := 1, Ctrl_IntStat := 0, Ctrl_z := 0, Ctrl_y0 := 0</label></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="728" y="96">Ctrl_IntStat == 0 &amp;&amp; Ctrl_z &gt;= 0</label><label kind="assignment" x="672" y="40">polled_Ctrl_Safe1 := S1_Safe, polled_Ctrl_Safe2 := S2_Safe, Ctrl_IntStat := 1</label><nail x="656" y="40"/><nail x="664" y="72"/></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="600" y="-32">Ctrl_IntStat == 2</label><label kind="assignment" x="600" y="-48">Ctrl_IntStat := 0, Ctrl_z := 0</label><nail x="600" y="0"/><nail x="568" y="-40"/></transition><transition><source ref="id10"/><target ref="id7"/><label kind="guard" x="440" y="64">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe2 == 0 &amp;&amp; Ctrl_grant2 == 1</label><label kind="assignment" x="240" y="112">Ctrl_grant2 := 0, Ctrl_IntStat := 0, Ctrl_z := 0, Ctrl_y0 := 0</label></transition><transition><source ref="id10"/><target ref="id10"/><label kind="guard" x="544" y="-96">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe2 == 1 &amp;&amp; Ctrl_grant2 == 1 &amp;&amp; Ctrl_y0 &lt;= 2000</label><label kind="assignment" x="552" y="-112">Ctrl_IntStat := 2</label><nail x="504" y="-96"/><nail x="528" y="-64"/></transition><transition><source ref="id10"/><target ref="id7"/><label kind="guard" x="264" y="0">Ctrl_IntStat == 1 &amp;&amp; polled_Ctrl_Safe2 == 1 &amp;&amp; Ctrl_grant2 == 1 &amp;&amp; Ctrl_y0 &gt;= 2000</label><label kind="assignment" x="224" y="-24">Ctrl_grant2 := 0, Ctrl_IntStat := 0, Ctrl_z := 0, Ctrl_y0 := 0</label><nail x="336" y="24"/><nail x="192" y="24"/></transition></template><template><name>drive_Root_req2</name><location id="id11" x="-208" y="80"></location><location id="id12" x="40" y="80"><name x="40" y="40">loop</name></location><init ref="id12"/><transition><source ref="id12"/><target ref="id11"/><label kind="guard" x="-120" y="0">Root_req2 == 1</label><label kind="assignment" x="-120" y="24">Root_req2 := 0</label><nail x="10" y="50"/><nail x="-176" y="48"/></transition><transition><source ref="id11"/><target ref="id12"/><label kind="guard" x="-120" y="136">Root_req2 == 0</label><label kind="assignment" x="-120" y="160">Root_req2 := 1</label><nail x="-184" y="128"/><nail x="16" y="128"/></transition></template><system>system S1, S2, Ctrl, drive_Root_req2;</system></nta>